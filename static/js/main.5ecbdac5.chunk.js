(window.webpackJsonp=window.webpackJsonp||[]).push([[123],{104:function(e,t,a){},105:function(e,t,a){e.exports={Title:"Toolbar_Title__T8vAL"}},109:function(e,t,a){e.exports={HomePost:"HomePost_HomePost__16vcN"}},236:function(e,t,a){e.exports=a(417)},245:function(e,t,a){},394:function(e,t,a){},416:function(e,t,a){var n={"./af":[113,0],"./af.js":[113,0],"./ar":[120,7],"./ar-dz":[114,1],"./ar-dz.js":[114,1],"./ar-kw":[115,2],"./ar-kw.js":[115,2],"./ar-ly":[116,3],"./ar-ly.js":[116,3],"./ar-ma":[117,4],"./ar-ma.js":[117,4],"./ar-sa":[118,5],"./ar-sa.js":[118,5],"./ar-tn":[119,6],"./ar-tn.js":[119,6],"./ar.js":[120,7],"./az":[121,8],"./az.js":[121,8],"./be":[122,9],"./be.js":[122,9],"./bg":[123,10],"./bg.js":[123,10],"./bm":[124,11],"./bm.js":[124,11],"./bn":[125,12],"./bn.js":[125,12],"./bo":[126,13],"./bo.js":[126,13],"./br":[127,14],"./br.js":[127,14],"./bs":[128,15],"./bs.js":[128,15],"./ca":[129,16],"./ca.js":[129,16],"./cs":[130,17],"./cs.js":[130,17],"./cv":[131,18],"./cv.js":[131,18],"./cy":[132,19],"./cy.js":[132,19],"./da":[133,20],"./da.js":[133,20],"./de":[136,23],"./de-at":[134,21],"./de-at.js":[134,21],"./de-ch":[135,22],"./de-ch.js":[135,22],"./de.js":[136,23],"./dv":[137,24],"./dv.js":[137,24],"./el":[138,25],"./el.js":[138,25],"./en-au":[139,26],"./en-au.js":[139,26],"./en-ca":[140,27],"./en-ca.js":[140,27],"./en-gb":[141,28],"./en-gb.js":[141,28],"./en-ie":[142,29],"./en-ie.js":[142,29],"./en-il":[143,30],"./en-il.js":[143,30],"./en-nz":[144,31],"./en-nz.js":[144,31],"./eo":[145,32],"./eo.js":[145,32],"./es":[148,35],"./es-do":[146,33],"./es-do.js":[146,33],"./es-us":[147,34],"./es-us.js":[147,34],"./es.js":[148,35],"./et":[149,36],"./et.js":[149,36],"./eu":[150,37],"./eu.js":[150,37],"./fa":[151,38],"./fa.js":[151,38],"./fi":[152,39],"./fi.js":[152,39],"./fo":[153,40],"./fo.js":[153,40],"./fr":[156,43],"./fr-ca":[154,41],"./fr-ca.js":[154,41],"./fr-ch":[155,42],"./fr-ch.js":[155,42],"./fr.js":[156,43],"./fy":[157,44],"./fy.js":[157,44],"./gd":[158,45],"./gd.js":[158,45],"./gl":[159,46],"./gl.js":[159,46],"./gom-latn":[160,47],"./gom-latn.js":[160,47],"./gu":[161,48],"./gu.js":[161,48],"./he":[162,49],"./he.js":[162,49],"./hi":[163,50],"./hi.js":[163,50],"./hr":[164,51],"./hr.js":[164,51],"./hu":[165,52],"./hu.js":[165,52],"./hy-am":[166,53],"./hy-am.js":[166,53],"./id":[167,54],"./id.js":[167,54],"./is":[168,55],"./is.js":[168,55],"./it":[169,56],"./it.js":[169,56],"./ja":[170,57],"./ja.js":[170,57],"./jv":[171,58],"./jv.js":[171,58],"./ka":[172,59],"./ka.js":[172,59],"./kk":[173,60],"./kk.js":[173,60],"./km":[174,61],"./km.js":[174,61],"./kn":[175,62],"./kn.js":[175,62],"./ko":[176,63],"./ko.js":[176,63],"./ky":[177,64],"./ky.js":[177,64],"./lb":[178,65],"./lb.js":[178,65],"./lo":[179,66],"./lo.js":[179,66],"./lt":[180,67],"./lt.js":[180,67],"./lv":[181,68],"./lv.js":[181,68],"./me":[182,69],"./me.js":[182,69],"./mi":[183,70],"./mi.js":[183,70],"./mk":[184,71],"./mk.js":[184,71],"./ml":[185,72],"./ml.js":[185,72],"./mn":[186,73],"./mn.js":[186,73],"./mr":[187,74],"./mr.js":[187,74],"./ms":[189,76],"./ms-my":[188,75],"./ms-my.js":[188,75],"./ms.js":[189,76],"./mt":[190,77],"./mt.js":[190,77],"./my":[191,78],"./my.js":[191,78],"./nb":[192,79],"./nb.js":[192,79],"./ne":[193,80],"./ne.js":[193,80],"./nl":[195,82],"./nl-be":[194,81],"./nl-be.js":[194,81],"./nl.js":[195,82],"./nn":[196,83],"./nn.js":[196,83],"./pa-in":[197,84],"./pa-in.js":[197,84],"./pl":[198,85],"./pl.js":[198,85],"./pt":[200,87],"./pt-br":[199,86],"./pt-br.js":[199,86],"./pt.js":[200,87],"./ro":[201,88],"./ro.js":[201,88],"./ru":[202,89],"./ru.js":[202,89],"./sd":[203,90],"./sd.js":[203,90],"./se":[204,91],"./se.js":[204,91],"./si":[205,92],"./si.js":[205,92],"./sk":[206,93],"./sk.js":[206,93],"./sl":[207,94],"./sl.js":[207,94],"./sq":[208,95],"./sq.js":[208,95],"./sr":[210,97],"./sr-cyrl":[209,96],"./sr-cyrl.js":[209,96],"./sr.js":[210,97],"./ss":[211,98],"./ss.js":[211,98],"./sv":[212,99],"./sv.js":[212,99],"./sw":[213,100],"./sw.js":[213,100],"./ta":[214,101],"./ta.js":[214,101],"./te":[215,102],"./te.js":[215,102],"./tet":[216,103],"./tet.js":[216,103],"./tg":[217,104],"./tg.js":[217,104],"./th":[218,105],"./th.js":[218,105],"./tl-ph":[219,106],"./tl-ph.js":[219,106],"./tlh":[220,107],"./tlh.js":[220,107],"./tr":[221,108],"./tr.js":[221,108],"./tzl":[222,109],"./tzl.js":[222,109],"./tzm":[224,111],"./tzm-latn":[223,110],"./tzm-latn.js":[223,110],"./tzm.js":[224,111],"./ug-cn":[225,112],"./ug-cn.js":[225,112],"./uk":[226,113],"./uk.js":[226,113],"./ur":[227,114],"./ur.js":[227,114],"./uz":[229,116],"./uz-latn":[228,115],"./uz-latn.js":[228,115],"./uz.js":[229,116],"./vi":[230,117],"./vi.js":[230,117],"./x-pseudo":[231,118],"./x-pseudo.js":[231,118],"./yo":[232,119],"./yo.js":[232,119],"./zh-cn":[233,120],"./zh-cn.js":[233,120],"./zh-hk":[234,121],"./zh-hk.js":[234,121],"./zh-tw":[235,122],"./zh-tw.js":[235,122]};function r(e){var t=n[e];return t?a.e(t[1]).then(function(){var e=t[0];return a.t(e,7)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}r.keys=function(){return Object.keys(n)},r.id=416,e.exports=r},417:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(47),c=a.n(s),o=a(11),i=(a(245),a(247),a(249),a(7)),l=a(8),u=a(12),m=a(9),p=a(13),d=a(104),h=a.n(d),E="AUTHENTICATION_FLOW",f="LOGOUT_FLOW",v="SIGN_UP_FLOW",g="VERIFYING_TOKEN_FLOW",b="ADD_POST_FLOW",j="RETRIEVE_POSTS_FLOW",N="RETRIEVE_POST_FLOW",O=function(e){return{type:"SIGN_UP_PENDING",payload:{isPending:e}}},y=function(e){return{type:"SIGN_UP_FAILURE",payload:{error:e}}},I=function(e){return{type:"SIGN_UP_SUCCESS",payload:{user:{email:e}}}},S=function(e){return{type:"AUTHENTICATION_PENDING",payload:{isPending:e}}},T=function(e){return{type:"AUTHENTICATION_FAIL",payload:{error:e}}},P=function(e){return{type:"AUTHENTICATION_SUCCESS",payload:{user:{email:e}}}},k=function(e){return{type:"VERIFYING_TOKEN_PENDING",payload:{isVerifing:e}}},x=function(e){return{type:"TOKEN_VALID",payload:{userInfo:e}}},_=function(){return{type:"TOKEN_INVALIDATE",payload:{err:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Generic error"}}},w=function(){return{type:"LOGOUT"}},A=a(419),C=a(254),R=a(423),U=function(e){var t=e.visibile?"is-active":null,a=e.visibile?"up":"down";return r.a.createElement("div",{className:"buttons dropdown "+t},r.a.createElement("button",{onClick:e.onClick,className:"button is-primary"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-user"})),r.a.createElement("span",null,e.username),r.a.createElement("span",{className:"icon is-small"},r.a.createElement("i",{className:"fas fa-angle-"+a,"aria-hidden":"true"}))),r.a.createElement("div",{className:"dropdown-menu",id:"dropdown-menu3",role:"menu"},r.a.createElement("div",{className:"dropdown-content"},r.a.createElement(A.a,{className:"dropdown-item",to:"/profile",onClick:e.onClick,activeClassName:"active"},"Profile"),r.a.createElement("hr",{className:"dropdown-divider"}),r.a.createElement("a",{onClick:function(){e.onLogout(),e.onClick()},rel:"nofollow noopener",href:"#logout",className:"dropdown-item"},r.a.createElement("span",{className:"icon"},r.a.createElement("i",{className:"fas fa-lock","aria-hidden":"true"})),r.a.createElement("span",null,"Logout")))))},D=a(105),L=a.n(D),V=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={showMobileNavbar:!1,dropdownUserIsVisible:!1},a.dropDownUserHandler=function(e){a.setState(function(e){return{dropdownUserIsVisible:!e.dropdownUserIsVisible}})},a.onBurgerButtonClick=function(e){a.setState(function(e){return{showMobileNavbar:!e.showMobileNavbar}})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar",role:"navigation","aria-label":"main navigation"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("a",{className:"navbar-item",href:"https://github.com/irsooti/s-blog/tree/dev"},r.a.createElement("span",{className:"is-bold "+L.a.Title},"SBLOG")),r.a.createElement("div",{className:"navbar-burger burger ".concat(this.state.showMobileNavbar?"is-active":""),"aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample",onClick:this.onBurgerButtonClick},r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}),r.a.createElement("span",{"aria-hidden":"true"}))),r.a.createElement("div",{id:"basicblogNavbar",className:"navbar-menu ".concat(this.state.showMobileNavbar?"is-active":"")},r.a.createElement("div",{className:"navbar-start"},r.a.createElement(A.a,{className:"navbar-item",activeClassName:"is-active",exact:!0,to:"/"},"Home"),void 0!==this.props.user.email?r.a.createElement(A.a,{className:"navbar-item",activeClassName:"is-active",to:"/newpost"},"New post"):null),void 0===this.props.user.email?r.a.createElement("div",{className:"navbar-end"},r.a.createElement("div",{className:"navbar-item"},r.a.createElement("div",{className:"buttons"},r.a.createElement(C.a,{to:"/signup",className:"button is-primary"},r.a.createElement("strong",null,"Sign up")),r.a.createElement(C.a,{className:"button is-light",to:"/login"},"Log in")))):r.a.createElement("div",{className:"navbar-end"},r.a.createElement("div",{className:"navbar-item"},r.a.createElement(U,{visibile:this.state.dropdownUserIsVisible,username:this.props.user.email,onLogout:this.props.onLogout,onClick:this.dropDownUserHandler})))))}}]),t}(n.Component),F=Object(R.a)(Object(o.b)(function(e){return{user:e.auth.user}},function(e){return{onLogout:function(){return e({type:f})}}})(V)),G=a(422),z=a(15),H=a(23),M=Object(H.a)();M.listen(function(e,t){window.scrollTo(0,0)});var B=M,W=a(252),Y=a(68),K=function(e){return{type:"RETRIEVE_POST_PENDING",payload:{getPostIsPending:e}}},q=function(e){return{type:"RETRIEVE_POST_SUCCESS",payload:{post:e}}},J=function(e){return{type:"RETRIEVE_POST_FAILURE",payload:{retrievePostError:e}}},X=function(e){return{type:"ADD_POST_SUCCESS",payload:{postIdRetrieved:e}}},Z=function(e){return{type:"ADD_POST_FAILURE",payload:{retrievePostError:e}}},$=function(e){return{type:"ADD_POST_PENDING",payload:{addingPostIsPending:e}}},Q=function(e){return{type:"RETRIEVE_POSTS_SUCCESS",payload:{posts:e}}},ee=function(e){return{type:"RETRIEVE_POSTS_FAILURE",payload:{retrievePostsError:e}}},te=function(e){return{type:"RETRIEVE_POSTS_PENDING_STATUS",payload:{isPending:e}}},ae=a(51),ne=a.n(ae),re=a(49),se=a.n(re),ce=a(29),oe=a.n(ce),ie=a(109),le=a.n(ie);function ue(e){var t=e.prefix,a=e.type,n=e.text,s=e.onRemove,c=e.size,o=void 0===c?"large":c;return r.a.createElement("span",{className:"tag is-".concat(a," is-").concat(o)},t,n,s?r.a.createElement("button",{onClick:s,class:"delete is-small"}):null)}var me=function(e){var t=e.timestamp,a=e.authorId,n=e.postId,s=e.title,c=e.text,o=e.tags,i=void 0===o?[]:o;return r.a.createElement("div",{style:{padding:25},className:"column is-full"},r.a.createElement("div",{className:"card "+le.a.HomePost,onClick:function(e,t){return function(a){console.log(e,t),B.push("/".concat(e,"/").concat(t))}}(a,n)},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"media"},r.a.createElement("div",null,r.a.createElement("h3",{className:"title is-3"},s),r.a.createElement("p",{className:"subtitle is-6"},r.a.createElement("time",{dateTime:oe()(t).format()},r.a.createElement("span",{"aria-label":"calendar",role:"img"},"\ud83d\udcc5")," ","".concat(oe()(t).format("D/MM/Y")))))),r.a.createElement("div",{className:"content"},se()(c)),r.a.createElement("div",{className:"tags"},i.map(function(e,t){return r.a.createElement(ue,{prefix:"#",key:t,type:"light",size:"medium",text:e})})))))},pe=function(e){return r.a.createElement("div",{className:"columns is-multiline"},e.posts.map(function(e){return r.a.createElement(me,{key:e.postId,postId:e.postId,authorId:e.authorId,title:e.title,text:e.text,timestamp:e.timestamp,tags:e.tags})}))},de=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.getAllPosts()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"hero is-link is-large "+ne.a.homePattern},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container "+ne.a.mainTitle},r.a.createElement("h1",{className:"title"},r.a.createElement("span",{className:"has-text-weight-bold is-size-1"},"Super Simpliest blog")),r.a.createElement("h6",null,r.a.createElement("span",{className:"is-size-4 has-text-white"},"in the world"))))),r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container "+ne.a.postsDistance},r.a.createElement(pe,{posts:this.props.posts}))))}}]),t}(n.Component),he=Object(o.b)(function(e){return{retrievePostError:e.posts.retrievePostError,posts:e.posts.all,postsLoadingStatus:e.posts.retrievePostsIsPending}},function(e){return{getAllPosts:function(){return e({type:j})}}})(de),Ee=a(16);function fe(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}var ve=a(421),ge=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={user:"",pass:"",userIsValid:!1},a.handleCredential=function(e){return function(t){var n=Object(Ee.a)({},a.state);n[e]=t.target.value,console.log(a.onEmailValidation(n.user)),a.setState({user:n.user,pass:n.pass})}},a.onAuthenticate=function(){var e=a.state,t=e.user,n=e.pass;console.log(t,n),fe(a.state.user)&&a.props.authenticate(t,n)},a.onEmailValidation=function(e){return fe(e)?(a.setState({userIsValid:!0}),!0):(a.setState({userIsValid:!1}),!1)},a.onFormValidation=function(e){e.preventDefault(),console.log(e),a.onAuthenticate()},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.error!==e.error&&null!==this.props.error&&z.toast.error("\ud83d\ude22 "+this.props.error,{position:z.toast.POSITION.BOTTOM_RIGHT})}},{key:"render",value:function(){var e=this.props.isPending?"is-loading":"",t=r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"hero is-medium is-primary"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"title"},"Login"),r.a.createElement("h2",{className:"subtitle"},"Authenticate and ",r.a.createElement("strong",null,"start your stories"))))),r.a.createElement("form",{onSubmit:this.onFormValidation},r.a.createElement("div",{className:"container",style:{padding:15}},r.a.createElement("div",{style:{marginTop:"1em"},className:"columns is-desktop is-5"},r.a.createElement("div",{className:"column is-3 is-offset-4"},r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left has-icons-right"},r.a.createElement("input",{className:"input",type:"email",placeholder:"Email",value:this.state.user,onChange:this.handleCredential("user")}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-envelope"})),r.a.createElement("span",{className:"icon is-small is-right"},r.a.createElement("i",{className:"fas ".concat(this.state.userIsValid?"fa-check":"fa-times")})))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left"},r.a.createElement("input",{className:"input",type:"password",value:this.state.pass,placeholder:"Password",onChange:this.handleCredential("pass")}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-lock"})))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control"},r.a.createElement("button",{type:"submit",className:"button is-success ".concat(e)},"Login")))))))),a=r.a.createElement(ve.a,{to:{pathname:this.props.redirectUrl}});return this.props.isAuthenticated?a:t}}]),t}(n.Component),be=Object(o.b)(function(e){return{user:e.auth.user,redirectUrl:e.auth.redirectUrl,isAuthenticated:e.auth.isAuthenticated,isPending:e.auth.isPending,error:e.auth.signinError}},function(e){return{authenticate:function(t,a){return e({type:E,payload:{email:t,password:a}})}}})(ge),je=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={user:"",pass:"",userIsValid:!1},a.handleCredential=function(e){return function(t){var n=Object(Ee.a)({},a.state);n[e]=t.target.value,console.log(a.onEmailValidation(n.user)),a.setState({user:n.user,pass:n.pass})}},a.onAuthenticate=function(){var e=a.state,t=e.user,n=e.pass;console.log(t,n),fe(a.state.user)&&a.props.authenticate(t,n)},a.onEmailValidation=function(e){return fe(e)?(a.setState({userIsValid:!0}),!0):(a.setState({userIsValid:!1}),!1)},a.onFormSubmit=function(e){e.preventDefault(),a.onAuthenticate()},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.error!==e.error&&null!==this.props.error&&z.toast.error("\ud83d\ude22 "+this.props.error,{position:z.toast.POSITION.BOTTOM_RIGHT})}},{key:"render",value:function(){var e=this.props.isPending?"is-loading":"",t=r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"hero is-medium is-info"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"title"},"Sign up"),r.a.createElement("h2",{className:"subtitle"},"Start ",r.a.createElement("strong",null,"your stories!"))))),r.a.createElement("form",{onSubmit:this.onFormSubmit},r.a.createElement("div",{className:"container",style:{padding:15}},r.a.createElement("div",{style:{marginTop:"1em"},className:"columns is-desktop is-5"},r.a.createElement("div",{className:"column is-3 is-offset-4"},r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left has-icons-right"},r.a.createElement("input",{className:"input",type:"email",placeholder:"Email",value:this.state.user,onChange:this.handleCredential("user")}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-envelope"})),r.a.createElement("span",{className:"icon is-small is-right"},r.a.createElement("i",{className:"fas ".concat(this.state.userIsValid?"fa-check":"fa-times")})))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left"},r.a.createElement("input",{className:"input",type:"password",value:this.state.pass,placeholder:"Password",onChange:this.handleCredential("pass")}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement("i",{className:"fas fa-lock"})))),r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control"},r.a.createElement("button",{onClick:this.onAuthenticate,className:"button is-success ".concat(e)},"Register")))))))),a=r.a.createElement(ve.a,{to:{pathname:"/"}});return this.props.isAuthenticated?a:t}}]),t}(n.Component),Ne=Object(o.b)(function(e){return{user:e.auth.user,isAuthenticated:e.auth.isAuthenticated,isPending:e.auth.isSigninUp,error:e.auth.signupError}},function(e){return{authenticate:function(t,a){return e({type:v,payload:{email:t,password:a}})}}})(je),Oe=function(e){return{isAuthenticated:e.auth.isAuthenticated}},ye=function(e){return{}},Ie=function(e){return Object(o.b)(Oe,ye)(function(e){return function(t){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(t=Object(u.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(s)))).IsNotAuthenticatedFragment=r.a.createElement(ve.a,{to:{pathname:"/login",state:{from:t.props.location}}}),t}return Object(p.a)(a,t),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.isAuthenticated?r.a.createElement(e,this.props):this.IsNotAuthenticatedFragment)}}]),a}(r.a.Component)}(e))},Se=a(110),Te=a.n(Se),Pe=(a(392),a(394),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).state={text:"",title:"",tags:[],tempTags:""},a.handleChangeArticle=function(e){a.setState({text:e})},a.handleChangeTitle=function(e){var t=e.target;a.setState({title:t.value})},a.handleChangeTags=function(e){var t=e.target.value;","===t[t.length-1]||";"===t[t.length-1]&&t.length>2?a.setState(function(e){return{tags:e.tags.concat(t.slice(0,t.length-1)),tempTags:""}}):a.setState({tempTags:t})},a.onRemoveTag=function(e){return function(){a.setState(function(t){return t.tags.splice(e,1),{tags:t.tags}})}},a.showIsPostingLoader=function(){return a.props.isLoading?"is-loading":""},a.addPostHandler=function(){var e=a.state,t=e.title,n=e.text,r=e.tags;t&&n?a.props.addPostFlow(t,n,r):z.toast.error("Fill the following fields:\n       ".concat(t?"":"title"," ").concat(n?"":"text"),{position:z.toast.POSITION.BOTTOM_RIGHT})},a.submitPostRef=r.a.createRef(),a.postSectionRef=r.a.createRef(),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){this.props.isLoading&&""===this.props.errorMsg&&this.props.postRedirect&&(z.toast.success("Post published! \ud83c\udf89",{position:z.toast.POSITION.BOTTOM_RIGHT}),B.push("/".concat(localStorage.getItem("localId"),"/").concat(this.props.postRedirect)))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"new-post"},r.a.createElement("section",{className:"hero is-light"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("h6",null,"Your awesome title"),r.a.createElement("h1",{className:"title is-size-2"},r.a.createElement("input",{placeholder:"Title",className:"input-title",type:"text",onChange:this.handleChangeTitle,value:this.state.title}))))),r.a.createElement("section",{className:"hero is-light is-small"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{class:"tags are-large"},this.state.tags.map(function(t,a){return r.a.createElement(ue,{onRemove:e.onRemoveTag(a),prefix:"#",type:"dark",key:a,text:t})})),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"#tags",className:"input-title",type:"text",onChange:this.handleChangeTags,value:this.state.tempTags}))))),r.a.createElement("section",{className:"",ref:this.postSectionRef},r.a.createElement(Te.a,{value:this.state.text,onChange:this.handleChangeArticle}),r.a.createElement("div",{ref:this.submitPostRef,style:{marginTop:"1em",textAlign:"right",position:"sticky",right:0,bottom:"2em"},className:"column is-12"},r.a.createElement("button",{onClick:this.addPostHandler,className:"button is-primary is-large "+this.showIsPostingLoader()},"Post it!"))))}}]),t}(n.Component)),ke=Object(o.b)(function(e){return{isLoading:e.posts.addingPostIsPending,errorMsg:e.posts.retrievePostError,postRedirect:e.posts.postIdRetrieved}},function(e){return{addPostFlow:function(t,a,n){return e({type:b,payload:{title:t,text:a,tags:n}})}}})(Pe),xe=a(67),_e=function(e){return e.text?se()(e.text):""},we=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.userId,a=e.postId;console.log(this.props),this.props.onLoadPost(t,a)}},{key:"render",value:function(){var e=r.a.createElement("article",null,r.a.createElement("section",{className:"hero is-medium is-dark"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"title"},this.props.post.text?r.a.createElement(_e,{text:this.props.post.title}):r.a.createElement(xe.Skeleton,{paragraph:32,rounded:!0,rows:1}))))),r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container",style:{marginTop:25,minHeight:"80vh"}},r.a.createElement("div",{className:"columns is-variable is-3"},r.a.createElement("div",{className:"column"},this.props.post.text?r.a.createElement(_e,{text:this.props.post.text}):r.a.createElement(xe.Skeleton,{rounded:!0,rows:6}))))));return r.a.createElement("div",null,e)}}]),t}(n.Component),Ae=Object(o.b)(function(e){return{post:e.posts.post,error:e.posts.retrievePostError,isPending:e.posts.retrievePostIsPending}},function(e){return{onLoadPost:function(t,a){return e(function(e,t){return{type:N,payload:{userId:e,postId:t}}}(t,a))}}})(we);var Ce=function(e){return r.a.createElement("section",{class:"hero is-warning is-fullheight"},r.a.createElement("div",{class:"hero-body"},r.a.createElement("div",{class:"container"},r.a.createElement("h1",{class:"title"},"Are you lost?"),r.a.createElement("h2",{class:"subtitle"},"As we said in Sicily... Chi minchia talii?"))))},Re=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"hero is-small is-light"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"title"},"Profile")))),r.a.createElement("section",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-3",style:{marginTop:"3em"}},r.a.createElement("aside",{class:"menu"},r.a.createElement("p",{class:"menu-label"},"General"),r.a.createElement("ul",{class:"menu-list"},r.a.createElement("li",null,r.a.createElement("button",{className:"is-active"},"Dashboard")),r.a.createElement("li",null,r.a.createElement("button",{className:"has-text-grey-lighter"},"Coming soon..."))))),r.a.createElement("div",{className:"column is-9",style:{minHeight:"80vh"}},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-9"},r.a.createElement("h2",{className:"title is-4"},"Profile name"),r.a.createElement("article",{className:"message is-danger"},r.a.createElement("div",{className:"message-header"},r.a.createElement("p",null,"WIP")),r.a.createElement("div",{className:"message-body"},"Current section is work in progress...")))))))))}}]),t}(n.Component);function Ue(e){return{opacity:e.opacity,transform:"scale(".concat(e.scale,")")}}function De(e){return Object(Y.b)(e,{stiffness:330,damping:22})}var Le={atEnter:{opacity:0,scale:1.2},atLeave:{opacity:De(0),scale:De(.8)},atActive:{opacity:De(1),scale:De(1)}},Ve=function(e){return r.a.createElement(Y.a,{atEnter:Le.atEnter,atLeave:Le.atLeave,atActive:Le.atActive,mapStyles:Ue,className:"switch-wrapper container is-fluid"},r.a.createElement(W.a,{exact:!0,path:"/",component:he}),r.a.createElement(W.a,{path:"/login/",component:be}),r.a.createElement(W.a,{path:"/signup/",component:Ne}),r.a.createElement(W.a,{path:"/profile/",component:Ie(Re)}),r.a.createElement(W.a,{path:"/newpost/",component:Ie(ke)}),r.a.createElement(W.a,{path:"/:userId/:postId",component:Ae}),r.a.createElement(W.a,{component:Ce}))},Fe=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!0},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){null!==this.props.user&&this.props.user==={}&&z.toast.success("You are in bro! \ud83d\udcaa",{position:z.toast.POSITION.BOTTOM_RIGHT})}},{key:"render",value:function(){return r.a.createElement(G.a,{history:B},r.a.createElement("div",{className:h.a.test},r.a.createElement(F,null),r.a.createElement(Ve,null),r.a.createElement(z.ToastContainer,null),r.a.createElement("footer",{className:"footer",style:{marginTop:10}},r.a.createElement("div",{className:"content has-text-centered"},r.a.createElement("p",null,r.a.createElement("strong",null,"SBLOG")," with \ud83d\udc97")))))}}]),t}(n.Component),Ge=Object(o.b)(function(e){return{user:e.auth.user}},function(e){return{preAuthenticate:function(t){return e({type:g,payload:{token:t}})},setRedirectUrl:function(t){return e(function(e){return{type:"REDIRECT_AFTER_LOGIN",payload:{redirectUrl:e}}}(t))}}})(Fe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ze=a(24),He=a(112),Me={isLoading:!0},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me;return(arguments.length>1?arguments[1]:void 0).type,e},We=a(420),Ye=function(e,t){return Object(Ee.a)({},e,t)},Ke=Object(We.a)(function(e,t){return t[e]}),qe=Object(We.a)(function(e){var t=[];return Object.keys(e).map(function(a){return Object.keys(e[a]).map(function(n){return t.push(Object(Ee.a)({},e[a][n],{authorId:a,postId:n}))})}),t}),Je=Object(We.a)(function(e){return e.sort(function(e,t){return new Date(e.timestamp)-new Date(t.timestamp)}).reverse()}),Xe={isPending:!1,isSigninUp:!1,isAuthenticated:!1,signupError:null,signinError:null,user:{},redirectUrl:"/"},Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Ye(e,{signupError:null});case E:return Ye(e,{signinError:null});case"SIGN_UP_SUCCESS":case"AUTHENTICATION_SUCCESS":return Ye(e,{isAuthenticated:!0,user:Object(Ee.a)({},e.user,t.payload.user)});case"SIGN_UP_FAILURE":return Ye(e,{isAuthenticated:!1,signupError:t.payload.error});case"AUTHENTICATION_FAIL":return Ye(e,{isAuthenticated:!1,signinError:t.payload.error});case"LOGOUT":return Ye(e,{isAuthenticated:!1,user:{}});case"AUTHENTICATION_PENDING":return Ye(e,{isPending:t.payload.isPending});case"SIGN_UP_PENDING":return Ye(e,{isSigninUp:t.payload.isPending});case"REDIRECT_AFTER_LOGIN":return Ye(e,{redirectUrl:"/login"===t.payload.redirectUrl?"/":t.payload.redirectUrl});default:return e}},$e={addingPostIsPending:!1,retrievePostsIsPending:!1,postIdRetrieved:null,retrievePostError:"",retrievePostIsPending:!1,post:{},all:[]},Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST_PENDING":return Ye(e,{addingPostIsPending:t.payload.addingPostIsPending});case"ADD_POST_SUCCESS":return Object(Ee.a)({},e,{postIdRetrieved:t.payload.postIdRetrieved,retrievePostError:""});case"ADD_POST_FAILURE":return Ye(e,{retrievePostError:t.payload.retrievePostError});case"RETRIEVE_POSTS_PENDING_STATUS":return Ye(e,{retrievePostsIsPending:t.payload.isPending});case"RETRIEVE_POSTS_SUCCESS":var a=t.payload.posts;return Ye(e,{all:a});case"RETRIEVE_POSTS_FAILURE":return Ye(e,{retrievePostsError:t.payload.retrievePostsError});case"RETRIEVE_POST_PENDING":return Ye(e,{retrievePostIsPending:t.payload.isPending});case"RETRIEVE_POST_SUCCESS":return Ye(e,{post:t.payload.post});case"RETRIEVE_POST_FAILURE":return Ye(e,{retrievePostError:t.payload.retrievePostError});default:return e}},et=a(111),tt=a.n(et),at=a(6),nt=a.n(at),rt=a(4),st=a(25),ct=a.n(st),ot=function(e,t){return ct.a.post("https://us-central1-sblog-175ab.cloudfunctions.net/signInAction",{email:e,pass:t,returnSecureToken:!0}).then(function(e){return e.data}).catch(function(e){return e.response.data})},it=function(e){return ct.a.post("https://us-central1-sblog-175ab.cloudfunctions.net/verifyTokenAction",{refresh_token:e}).then(function(e){return e.data}).catch(function(e){return e.response.data})},lt=function(e,t){return ct.a.post("https://us-central1-sblog-175ab.cloudfunctions.net/signupAction",{email:e,password:t,returnSecureToken:!0}).then(function(e){return e.data}).catch(function(e){return e.response.data})},ut=nt.a.mark(ht),mt=nt.a.mark(Et),pt=nt.a.mark(ft),dt=nt.a.mark(vt);function ht(e){var t;return nt.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(rt.c)(S(!0));case 2:return a.prev=2,a.next=5,Object(rt.b)(ot,e.payload.email,e.payload.password);case 5:if(!(t=a.sent).error_status){a.next=8;break}throw new Error(t.error_status);case 8:return a.next=10,localStorage.setItem("refreshToken",t.refreshToken);case 10:return a.next=12,localStorage.setItem("username",t.email);case 12:return a.next=14,localStorage.setItem("token",t.idToken);case 14:return a.next=16,localStorage.setItem("localId",t.localId);case 16:return a.next=18,Object(rt.c)(P(t.email));case 18:a.next=32;break;case 20:return a.prev=20,a.t0=a.catch(2),a.next=24,Object(rt.c)(T(a.t0.message));case 24:return a.next=26,localStorage.removeItem("refreshToken");case 26:return a.next=28,localStorage.removeItem("username");case 28:return a.next=30,localStorage.removeItem("token");case 30:return a.next=32,localStorage.removeItem("localId");case 32:return a.prev=32,a.next=35,Object(rt.c)(S(!1));case 35:return a.finish(32);case 36:case"end":return a.stop()}},ut,this,[[2,20,32,36]])}function Et(e){var t;return nt.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(rt.c)(O(!0));case 2:return a.prev=2,a.next=5,Object(rt.b)(lt,e.payload.email,e.payload.password);case 5:if(!(t=a.sent).error_status){a.next=8;break}throw new Error(t.error_status);case 8:return a.next=10,localStorage.setItem("refreshToken",t.refreshToken);case 10:return a.next=12,localStorage.setItem("username",t.email);case 12:return a.next=14,localStorage.setItem("token",t.idToken);case 14:return a.next=16,localStorage.setItem("localId",t.localId);case 16:return a.next=18,Object(rt.c)(I(t.email));case 18:a.next=32;break;case 20:return a.prev=20,a.t0=a.catch(2),a.next=24,Object(rt.c)(y(a.t0.message));case 24:return a.next=26,localStorage.removeItem("refreshToken");case 26:return a.next=28,localStorage.removeItem("username");case 28:return a.next=30,localStorage.removeItem("token");case 30:return a.next=32,localStorage.removeItem("localId");case 32:return a.prev=32,a.next=35,Object(rt.c)(O(!1));case 35:return a.finish(32);case 36:case"end":return a.stop()}},mt,this,[[2,20,32,36]])}function ft(e){var t;return nt.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(rt.c)(k(!0));case 2:return a.prev=2,a.next=5,Object(rt.b)(it,e.payload.token);case 5:if(t=a.sent,localStorage.getItem("username")){a.next=8;break}throw new Error("Username misconfiguration");case 8:return a.next=10,localStorage.setItem("token",t.access_token);case 10:return a.next=12,localStorage.setItem("refreshToken",t.refresh_token);case 12:return a.next=14,localStorage.setItem("localId",t.user_id);case 14:return a.next=16,Object(rt.c)(P(localStorage.getItem("username")));case 16:return a.next=18,Object(rt.c)(x(t));case 18:a.next=32;break;case 20:return a.prev=20,a.t0=a.catch(2),a.next=24,localStorage.removeItem("refreshToken");case 24:return a.next=26,localStorage.removeItem("username");case 26:return a.next=28,localStorage.removeItem("token");case 28:return a.next=30,localStorage.removeItem("localId");case 30:return a.next=32,Object(rt.c)(_());case 32:return a.prev=32,a.next=35,Object(rt.c)(k(!1));case 35:return a.finish(32);case 36:case"end":return a.stop()}},pt,this,[[2,20,32,36]])}function vt(){return nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.removeItem("refreshToken");case 2:return e.next=4,localStorage.removeItem("token");case 4:return e.next=6,localStorage.removeItem("username");case 6:return e.next=8,Object(rt.c)(w());case 8:case"end":return e.stop()}},dt,this)}var gt=function(e,t,a){var n={params:{auth:e}};return ct.a.post("".concat("https://sblog-175ab.firebaseio.com","/posts/").concat(t,".json"),Object(Ee.a)({},a,{timestamp:new Date}),n).then(function(e){return e.data.name}).catch(function(e){return console.warn("Error at post ",e),e})},bt=function(){return ct.a.get("".concat("https://sblog-175ab.firebaseio.com","/posts.json")).then(Ke("data")).then(qe).then(Je).catch(function(e){return e})},jt=function(e,t){return ct.a.get("".concat("https://sblog-175ab.firebaseio.com","/posts/").concat(e,"/").concat(t,".json")).then(function(e){return e.data}).catch(function(e){return e})},Nt=nt.a.mark(It),Ot=nt.a.mark(St),yt=nt.a.mark(Tt);function It(e){var t,a,n;return nt.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(rt.c)($(!0));case 2:return r.prev=2,t=localStorage.getItem("token"),a=localStorage.getItem("localId"),console.log(t),r.next=8,Object(rt.b)(gt,t,a,e.payload);case 8:return n=r.sent,console.log(n),r.next=12,Object(rt.c)(X(n));case 12:r.next=18;break;case 14:return r.prev=14,r.t0=r.catch(2),r.next=18,Object(rt.c)(Z("Generic error "+r.t0));case 18:return r.prev=18,r.next=21,Object(rt.c)($(!1));case 21:return r.finish(18);case 22:case"end":return r.stop()}},Nt,this,[[2,14,18,22]])}function St(){var e;return nt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(rt.c)(te(!0));case 2:return t.prev=2,t.next=5,Object(rt.b)(bt);case 5:return e=t.sent,t.next=8,Object(rt.c)(Q(e));case 8:t.next=15;break;case 10:return t.prev=10,t.t0=t.catch(2),console.log(t.t0.message),t.next=15,Object(rt.c)(ee(t.t0));case 15:return t.prev=15,t.next=18,Object(rt.c)(te(!1));case 18:return t.finish(15);case 19:case"end":return t.stop()}},Ot,this,[[2,10,15,19]])}function Tt(e){var t;return nt.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(rt.c)(K(!0));case 2:return a.prev=2,a.next=5,Object(rt.b)(jt,e.payload.userId,e.payload.postId);case 5:return t=a.sent,a.next=8,Object(rt.c)(q(t));case 8:a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(2),a.next=14,Object(rt.c)(J(a.t0));case 14:return a.prev=14,a.next=17,Object(rt.c)(K(!1));case 17:return a.finish(14);case 18:case"end":return a.stop()}},yt,this,[[2,10,14,18]])}var Pt=nt.a.mark(kt);function kt(){return nt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=rt.a,e.next=3,Object(rt.d)(E,ht);case 3:return e.t1=e.sent,e.next=6,Object(rt.d)(g,ft);case 6:return e.t2=e.sent,e.next=9,Object(rt.d)(b,It);case 9:return e.t3=e.sent,e.next=12,Object(rt.d)(j,St);case 12:return e.t4=e.sent,e.next=15,Object(rt.d)(f,vt);case 15:return e.t5=e.sent,e.next=18,Object(rt.d)(v,Et);case 18:return e.t6=e.sent,e.next=21,Object(rt.d)(N,Tt);case 21:return e.t7=e.sent,e.t8=[e.t1,e.t2,e.t3,e.t4,e.t5,e.t6,e.t7],e.next=25,(0,e.t0)(e.t8);case 25:case"end":return e.stop()}},Pt,this)}var xt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ze.d,_t=Object(He.a)(),wt=Object(ze.c)({common:Be,auth:Ze,posts:Qe}),At=function(){var e=Object(ze.e)(wt,xt(Object(ze.a)(_t),Object(ze.a)(tt.a)));return _t.run(kt),e};a(416)("./"+window.navigator.language),oe.a.locale(),c.a.render(r.a.createElement(o.a,{store:At()},r.a.createElement(Ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},51:function(e,t,a){e.exports={postsDistance:"Home_postsDistance__OadEA",homePattern:"Home_homePattern__312Ai",mainTitle:"Home_mainTitle__2aUe1"}}},[[236,125,124]]]);
//# sourceMappingURL=main.5ecbdac5.chunk.js.map